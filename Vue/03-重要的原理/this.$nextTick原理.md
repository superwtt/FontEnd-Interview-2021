#### this.$nextTick原理

Vue中数据的更新是异步的，有时候我们修改完数据之后，不能立马获取到更新后的DOM，这时候`this.$nextTick`就派上用场



我们可以简单理解为，当页面中的数据发生改变，就会把该任务放到一个异步队列中，只有在当前任务空闲时才会进行DOM渲染，当DOM渲染完成之后，该回调函数会自动执行

---

#### 原理

JS的事件循环和任务队列是理解 nextTick 的关键

---

#### JS的事件循环机制

1. 首先我们要知道

   + JavaScript是单线程语言
   + 事件循环机制EeentLoop是JavaScript的执行机制

2. JS的执行顺序

   + 同步和异步分别进入两个不同的执行场所，同步的进入主线程，异步的进入Event Table并注册回调函数

   + 同步和异步同时进行

   + 异步队列中，当指定的事情完成时，EventTable会把这个函数移入`EventQueue`

   + 在一次事件循环中，异步事件返回的结果，会被放入一个任务队列中，根据异步事件的类型，需要把事件放入到对应的微任务或宏任务队列

   + 当主线程空闲时，即执行栈为空，主线程会先查看微任务队列，执行清空，继续下一轮的事件循环

     ![](https://raw.githubusercontent.com/superwtt/MyFileRepository/main/image/Vue/js的事件循环机制.png)

---

#### Vue的异步更新策略

Vue实现响应式的DOM更新并不是数据发生变化之后DOM立即变化，而是按照一个策略进行的DOM更新，这就使得我们并不能在数据更新之后立马拿到更新后的DOM

至于为什么设计成异步的，其实很好理解：如果是同步的，当我们频繁地去改变状态值，会导致DOM不停地更新，这显然是不行的

---

#### 具体实现

































---

#### 总结

1. 当我们在数据更新之后立马拿到更新后的DOM时，就需要使用`this.$nextTck`这个API
2. 原理分为两个部分：
   + Vue的异步更新策略：
   + JS的事件循环机制：

































